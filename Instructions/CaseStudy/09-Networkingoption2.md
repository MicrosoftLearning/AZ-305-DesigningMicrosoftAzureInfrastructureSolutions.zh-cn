---
casestudy:
    title: '设计网络解决方案 - BI 企业应用程序'
    module: '网络基础结构解决方案（选项 2）'
---
# 设计网络基础结构解决方案  

预计用时：60 分钟

## 要求

由于 Tailwind Traders 企业 IT 团队准备定义将公司的一些工作负载迁移到 Azure 的策略，因此它必须确定所需的网络组件，并设计必要的网络基础结构来支持它们。考虑到该公司是在全球范围内运营的，Tailwind Traders 将使用多个 Azure 区域来托管其应用程序。大多数应用程序都依赖于基础结构和数据服务，这些服务也将驻留在 Azure 中。迁移到 Azure 的内部应用程序必须保持能被 Tailwind Traders 用户访问的状态。迁移到 Azure 的面向 Internet 的应用程序必须保持能被任何外部客户访问的状态。 

为了将最初的网络设计结合在一起，Tailwind Traders 企业 IT 团队选择了两个关键的应用程序，它们代表了预期迁移到 Azure 的最常见的工作负载类别。  

## 设计 - BI 企业应用程序 

![BI 企业应用程序体系结构](media/compute.png)

-	一个内部、基于 Windows 的三层商业智能 (BI) 企业应用程序，前端层运行 IIS web 服务器，中间层托管基于 .NET Framework 的业务逻辑，后端层实现为 SQL Server Always On 可用性组数据库。 

-	此应用程序被归类为任务关键型，需要预配高可用性，具备 99.99% 可用性 SLA 以及 10 分钟 RPO 和 2 小时 RTO 的灾难恢复。

-	为了提供对迁移到 Azure 的内部应用的连接，Tailwind Traders 需要从他们的本地数据中心建立混合连接。企业 IT 部门已经确定，从西雅图主数据中心通过使用 ExpressRoute 线路来实现该连接，但是目前尚不清楚在线路变得不可用的情况下要采用怎样的故障转移解决方案。Tailwind Traders 的 CFO 希望避免为另一个多余的 ExpressRoute 线路支付费用。 

- 对于迁移到 Azure 的内部应用的本地连接，还有其他注意事项。由于 Tailwind Traders Azure 环境将由多个订阅和多个虚拟网络组成，为了最大限度地降低成本，尽量减少实现核心网络功能所需的 Azure 资源数量至关重要。这些功能包括到本地位置的混合连接以及流量筛选。顺带一提，这种成本最小化的需求符合信息安全和风险要求，其中规定本地位置和 Azure 虚拟网络之间的所有流量必须通过单个虚拟网络流动，该虚拟网络将托管负责混合连接和流量筛选的组件。 

-	根据 Tailwind Traders 信息安全和风险团队定义的要求，属于同一应用程序的不同层级中 Azure VM 之间的所有通信必须只允许运行和维护应用程序所需的端口。但是，由于 IP 地址空间限制，可能无法为每个层级分配专用子网。企业 IT 小组需要确定配置流量筛选的源和目标的最佳方式，而无需直接引用 IP 地址或 IP 地址范围。


## 任务 - BI 企业应用程序 

1. 为 BI 应用程序设计一个三层网络解决方案。你的设计可以包括 Azure ExpressRoute、VPN 网关、应用程序网关、Azure 防火墙和 Azure 负载均衡器。应将网络组件分组到虚拟网络中，并考虑网络安全组。准备好解释为什么选择解决方案的每个组件。 

2. 根据计算案例研究中的体系结构解决方案，这将如何影响网络设计？是否需要任何其他网络资源来保护对现代化应用程序的访问？是否不再需要在原始网络设计中实现一些建议解决方案？ 

3. 根据存储（关系型）案例研究，你将如何更新网络设计以保护对存储帐户的访问，并确保只有选定的用户有权访问存储帐户？

4. 基于 SQL 后端的现代化，你打算如何实现对数据库的实用访问，使前端的代码库中没有硬编码机密？

如何结合架构良好框架的支柱来生成高质量、稳定和高效的云体系结构?
